---
layout: post
title: "Experiences with the CC2530 Zigbee IC"
thumbnail: cc2530-240.jpg
date: 2018-02-14
---

My set-top box for my TV has a remote that works with RF instead of infrared light. I read somewhere that it could be Zigbee, which made me interested in sniffing Zigbee communication. I bought a development board without thinking how to get it working. Also, I don't have much experience with hardware. In this article I describe what I learned along the way.

## Texas Instruments CC2530

I searched on DealExtreme for Zigbee interfaces and bought the cheapest one available, for &euro;5. This board is basically a Texas Instruments CC2530 chip with some pins and an antenna attacked to it.
After receiving it, I looked up the datasheet. It says a couple of things:

> The CC2530 is a true system-on-chip (SoC) solution for IEEE 802.15.4, Zigbee and RF4CE applications.

System-on-chip means that this is a whole computer in one chip. So it has a CPU, memory, flash, timers, clock, UART, all the things.

> High-Performance and Low-Power 8051 Microcontroller Core With Code Prefetch.

It has a 8051 CPU, as in [Intel 8051](https://en.wikipedia.org/wiki/Intel_MCS-51) from the 1980's. 

> The CC2530 pinout is shown in Figure 7 and a short description of the pins follows.

The datasheet also provides information about all the pins. This is particularly helpful since the development board doesn't have any documentation at all. I had to trace the lines on the PCB to figure out what all the pins do.

<img src="/images/cc2530.jpg" alt="CC2530 board">

## Blinking LED

TODO write about memory mapped I/O

To make use of thing I want to run a program on it. I wrote a little [blinking LED program](https://github.com/Sjord/cc2530/blob/master/blink/blink.c). After some searching I found a compiler that can compile for 8051: [SDCC](http://sdcc.sourceforge.net/). Compiling the C file creates an [Intel HEX](https://en.wikipedia.org/wiki/Intel_HEX) file, which contains HEX data and offsets where to put it in flash. 

[CCLib](https://github.com/wavesoft/CCLib)
